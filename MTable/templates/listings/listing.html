{% extends 'base.html' %}
{% load static %} {% load humanize %}
{% block title %} | {{ listing.title |title }} {% endblock title %}
{% block content %}
    <!-- Showcase -->
     {% include "partials/_alert.html" %}
  
      <!-- Breadcrumb -->
      <section id="bc" class="mt-3">
        <div class="container">
          <nav>
            <ol class="breadcrumb">
              <li class="breadcrumb-item">
                <a href="{% url 'index' %}">Home</a>
              </li>
              <li class="breadcrumb-item">
                <a href="{% url 'listings' %}">Branch</a>
              </li>
              <li class="breadcrumb-item active">{{ listing.title }}</li>
            </ol>
          </nav>
        </div>
      </section>
  
      <!-- Listing -->
      <section id="listing" class="py-4">
        <div class="container">
          <a href="{% url 'listings' %}" class="btn btn-light mb-4">Back To Lists</a>
          <div class="row">
            <div class="col-md-9">
              <!-- Home Main Image -->
              <img
                src={{ listing.photo_main.url }}
                alt=""
                class="img-main img-fluid mb-3"
              />
              <!-- Thumbnails -->
              <div class="row mb-5 thumbs">
                {% if listing.photo_1 %}
                <div class="col-md-2">
                  <a
                    href={{ listing.photo_1.url }}
                    data-lightbox="home-images"
                  >
                    <img
                      src={{ listing.photo_1.url }}
                      alt=""
                      class="img-fluid"
                    />
                  </a>
                </div>
                {% endif %}
                {% if listing.photo_2 %}
                <div class="col-md-2">
                  <a
                    href={{ listing.photo_2.url }}
                    data-lightbox="home-images"
                  >
                    <img
                      src={{ listing.photo_2.url }}
                      alt=""
                      class="img-fluid"
                    />
                  </a>
                </div>
                {% endif %}
                {% if listing.photo_3 %}
                <div class="col-md-2">
                  <a
                    href={{ listing.photo_3.url }}
                    data-lightbox="home-images"
                  >
                    <img
                      src={{ listing.photo_3.url }}
                      alt=""
                      class="img-fluid"
                    />
                  </a>
                </div>
                {% endif %}
                {% if listing.photo_4 %}
                <div class="col-md-2">
                  <a
                    href={{ listing.photo_4.url }}
                    data-lightbox="home-images"
                  >
                    <img
                      src={{ listing.photo_4.url }}
                      alt=""
                      class="img-fluid"
                    />
                  </a>
                </div>
                {% endif %}
                {% if listing.photo_5 %}
                <div class="col-md-2">
                  <a
                    href={{ listing.photo_5.url }}
                    data-lightbox="home-images"
                  >
                    <img
                      src={{ listing.photo_5.url }}
                      alt=""
                      class="img-fluid"
                    />
                  </a>
                </div>
                {% endif %}
                {% if listing.photo_6 %}
                <div class="col-md-2">
                  <a
                    href={{ listing.photo_6.url }}
                    data-lightbox="home-images"
                  >
                    <img
                      src={{ listing.photo_6.url }}
                      alt=""
                      class="img-fluid"
                    />
                  </a>
                </div>
                {% endif %}
              </div>
              <!-- Fields -->
              <div class="row mb-5 fields">
                <div class="col-md-6">
                  <ul class="list-group list-group-flush">
                    <!-- Modified Date: 2025-01-18 -->
                    <!-- Modified Content: Changed key and value text color to white, background to black and gold -->
                    <li class="list-group-item bg-dark text-white border-warning">
                      <div class="d-flex justify-content-between align-items-center">
                        <div>
                          <i class="fas fa-money-bill-alt text-white"></i> Price <!-- White icon -->
                        </div>
                        <div class="text-white">
                          {{ listing.price|intcomma }} <!-- White value -->
                        </div>
                      </div>
                    </li>
                    <li class="list-group-item bg-dark text-white border-warning">
                      <div class="d-flex justify-content-between align-items-center">
                        <div>
                          <i class="fa-solid fa-music text-white"></i> Band <!-- White icon -->
                        </div>
                        <div class="text-white">
                          {{ listing.bedrooms }} <!-- White value -->
                        </div>
                      </div>
                    </li>
                    <li class="list-group-item bg-dark text-white border-warning">
                      <div class="d-flex justify-content-between align-items-center">
                        <div>
                          <i class="fa-solid fa-user text-white"></i> Guest <!-- White icon -->
                        </div>
                        <div class="text-white">
                          {{ listing.bathrooms }} <!-- White value -->
                        </div>
                      </div>
                    </li>
                    <li class="list-group-item bg-dark text-white border-warning">
                      <div class="d-flex justify-content-between align-items-center">
                        <div>
                          <i class="fa-solid fa-chair text-white"></i> Seat <!-- White icon -->
                        </div>
                        <div class="text-white">
                          {{ listing.clubhouse }} <!-- White value -->
                        </div>
                      </div>
                    </li>
                  </ul>
                </div>
                <div class="col-md-6">
                  <ul class="list-group list-group-flush">
                    <!-- Modified Date: 2025-01-18 -->
                    <!-- Modified Content: Changed key and value text color to white, background to black and gold -->
                    <li class="list-group-item bg-dark text-white border-warning">
                      <div class="d-flex justify-content-between align-items-center">
                        <div>
                          <i class="fas fa-th-large text-white"></i> Exquisite Dimensions <!-- White icon -->
                        </div>
                        <div class="text-white">
                          {{ listing.sqft }} <!-- White value -->
                        </div>
                      </div>
                    </li>
                    <li class="list-group-item bg-dark text-white border-warning">
                      <div class="d-flex justify-content-between align-items-center">
                        <div>
                          <i class="fa-solid fa-utensils text-white"></i> Course <!-- White icon -->
                        </div>
                        <div class="text-white">
                          {{ listing.estate_size }} <!-- White value -->
                        </div>
                      </div>
                    </li>
                    <li class="list-group-item bg-dark text-white border-warning">
                      <div class="d-flex justify-content-between align-items-center">
                        <div>
                          <i class="fas fa-calendar text-white"></i> Offered From <!-- White icon -->
                        </div>
                        <div class="text-white">
                          {{ listing.list_date|timesince }} <!-- White value -->
                        </div>
                      </div>
                    </li>
                    <li class="list-group-item bg-dark text-white border-warning">
                      <div class="d-flex justify-content-between align-items-center">
                        <div>
                          <i class="fa-solid fa-chess-pawn text-white"></i> Head Chef <!-- White icon -->
                        </div>
                        <div class="text-white">
                          {{ listing.realtor }} <!-- White value -->
                        </div>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>
  
              <!-- Description -->
              <div class="row mb-5">
                <div class="col-md-12">
                  {{ listing.description }}
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="card mb-3">
                <img
                  class="card-img-top"
                  src={{ listing.realtor.photo.url }}
                  alt="Seller of the month"
                />
                <div class="card-body">
                  <h5 class="card-title">Head Chef</h5>
                  <h6 class="text-warning">{{ listing.realtor }}</h6>
                </div>
              </div>
              <!-- Modified More Info Button -->
              <button
                class="btn-primary btn-block btn-lg"
                data-toggle="modal"
                data-target="#inquiryModal"
                style="background-color: #1a1a1a; color: white; border: 2px solid #d4af37; border-radius: 0; font-weight: bold; text-transform: uppercase; transition: background-color 0.3s ease, color 0.3s ease;"
                onmouseover="this.style.backgroundColor='#d4af37'; this.style.color='#1a1a1a'; this.style.borderColor='#1a1a1a';"
                onmouseout="this.style.backgroundColor='#1a1a1a'; this.style.color='white'; this.style.borderColor='#d4af37';"
              >
                Make A Reservation
              </button>
            </div>
          </div>
        </div>
      </section>
  
<!-- Inquiry Modal -->
<div class="modal fade" id="inquiryModal" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="inquiryModalLabel">Make A Reservation</h5>
        <button type="button" class="close" data-dismiss="modal">
          <span>&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form action="{% url 'contact' %}" method='POST'>
          {% csrf_token %}
          <!-- Check user and get ID -->
          {% if user.is_authenticated %}
          <input type="hidden" name="user_id" value="{{ user.id }}" />
          {% else %}
          <input type="hidden" name="user_id" value=0 />
          {% endif %}
          <input type="hidden" name="realtor_email" value="{{ listing.realtor.email }}"/>
          <input type="hidden" name="listing_id" value="{{ listing.id }}" />
          <div class="form-group">
            <label for="property_name" class="col-form-label">Location:</label>
            <input
              type="text"
              name="listing_title"
              class="form-control"
              value="{{ listing.title }}"
            />
          </div>
          <div class="form-group">
            <label for="name" class="col-form-label">Name:</label>
            <input
              type="text"
              name="name"
              class="form-control"
              {% if user.is_authenticated %}
              value="{{ user.first_name }} {{ user.last_name}}"
              {% endif %}
              required
            />
          </div>
          <div class="form-group">
            <label for="email" class="col-form-label">Email:</label>
            <input
              type="email"
              name="email"
              class="form-control"
              {% if user.is_authenticated %}
              value="{{ user.email }}"
              {% endif %}
              required
            />
          </div>
          <div class="form-group">
            <label for="phone" class="col-form-label">Phone:</label>
            <input
              type="text"
              name="phone"
              class="form-control"
            />
          </div>
          <div class="form-group">
            <label for="message" class="col-form-label">Message:</label>
            <textarea
              name="message"
              class="form-control"
            ></textarea>
          </div>
          <hr />
          <!-- Modified Date: 2025-01-18 -->
          <!-- Modified Content: Increased Send button size to double and changed to black and gold style -->
          <input
            type="submit"
            value="Send"
            class="btn btn-block btn-lg"
            style="
              background-color: #1a1a1a; /* Black background */
              color: #d4af37; /* Gold text */
              border: 2px solid #d4af37; /* Gold border */
              font-size: 1.5rem; /* Double size */
              font-weight: bold; /* Bold text */
              padding: 10px 20px; /* Increased padding */
            "
          />
        </form>
      </div>
    </div>
  </div>
</div>

{% endblock %}